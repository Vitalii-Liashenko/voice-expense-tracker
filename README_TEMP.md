# Тимчасова імплементація Voice Expense Tracker

Цей проект представляє собою тимчасову імплементацію Telegram бота для відстеження витрат за допомогою голосових та текстових повідомлень.

## Опис імплементації

Імплементація включає наступні компоненти:
1. **telegram_bot** - обробники повідомлень Telegram
2. **whisper_transcriber** - транскрипція голосових повідомлень в текст
3. **ai_agent** - аналіз наміру, парсинг витрат та генерація аналітики
4. **db** - збереження та отримання даних про витрати

### Основний потік роботи:

1. Користувач надсилає голосове або текстове повідомлення до бота
2. Для голосових повідомлень, використовується Whisper API для транскрипції
3. Текст аналізується за допомогою Claude 3.7 Sonnet для визначення наміру
4. Залежно від наміру:
   - Для витрат: парсинг даних та збереження у базу даних
   - Для аналітики: генерація та надсилання аналітичної відповіді
5. Якщо намір невідомий, бот відправляє користувачу відповідне повідомлення

## Налаштування

### 1. Створення файлу .env.local

Створіть у кореневій директорії файл `.env.local` з наступним вмістом:

```bash
DB_HOST=localhost
DB_PORT=5432
DB_NAME=voice_expense_tracker
DB_USER=postgres
DB_PASSWORD=your_password

TELEGRAM_BOT_TOKEN=your_telegram_bot_token
AUTHOR_USER_ID=your_telegram_user_id

OPENAI_API_KEY=your_openai_api_key
ANTHROPIC_API_KEY=your_anthropic_api_key
```

### 2. Встановлення залежностей

```bash
pip install -r requirements.txt
```

### 3. Запуск бази даних (PostgreSQL)

```bash
docker-compose up -d
```

### 4. Запуск бота

```bash
python run.py
```

## Використання

### Основні команди бота:
- `/start` - почати роботу з ботом
- `/help` - отримати довідку

### Приклади взаємодії:

**Запис витрати (голосом або текстом):**
- "Купив продукти в АТБ за 235 грн"
- "Витратив 400 гривень на таксі"
- "Обід у кафе за 175 грн"

**Запит аналітики:**
- "Скільки я витратив цього місяця?"
- "Покажи витрати на транспорт"
- "Який у мене залишок бюджету?"

## Примітки

1. Поточна імплементація вимагає усіх API ключів для коректної роботи.
2. Для ідентифікації запит має надходити від користувача з ID, вказаним у AUTHOR_USER_ID.
3. Якщо відсутній будь-який з ключів API, бот не запуститься. 